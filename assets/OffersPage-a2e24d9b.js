import{r as o,j as s,e as F,m as N,_ as h,i as x,R as m,n as p,x as b,k as j,l as y,Q as L,H as R}from"./index-4db4b949.js";const q=()=>{const[l,c]=o.useState(null),[S,d]=o.useState(!0),[g,u]=o.useState(null);o.useEffect(()=>{async function t(){try{const r=h(x,"listings"),n=m(r,p("offer","==",!0),b("timestamp","desc"),j(8)),i=await y(n),a=i.docs[i.docs.length-1];u(a);const e=[];i.forEach(f=>e.push({id:f.id,data:f.data()})),c(e),d(!1)}catch{L.error("Could not fetch listing")}}t()},[]);async function E(){try{const t=h(x,"listings"),r=m(t,p("offer","==",!0),b("timestamp","desc"),R(g),j(4)),n=await y(r),i=n.docs[n.docs.length-1];u(i);const a=[];n.forEach(e=>a.push({id:e.id,data:e.data()})),c(e=>[...e,...a]),d(!1)}catch{L.error("Could not fetch listing")}}return s.jsxs("div",{className:"max-w-6xl mx-auto px-3",children:[s.jsx("h1",{className:"mt-6 mb-6 text-3xl text-center font-bold",children:"Offers"}),S?s.jsx(F,{}):l&&l.length>0?s.jsxs(s.Fragment,{children:[s.jsx("main",{children:s.jsx("ul",{className:"sm:grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:l.map(t=>s.jsx(N,{id:t.id,listing:t.data},t.id))})}),g&&s.jsx("div",{className:"flex justify-center items-center ",children:s.jsx("button",{onClick:E,className:"bg-pink-50 px-3 py-1.5 text-gray-700 border border-gray-300 mb-6 mt-6 hover:border-slate-600 hover:bg-blue-50 rounded transition duration-200 ease-in-out",children:"Load more"})})]}):s.jsx("p",{children:"There are no current offers"})]})};export{q as default};
