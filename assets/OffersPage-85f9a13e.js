import{r as l,j as s,b as F,h as N,_ as h,e as x,R as m,i as p,x as b,k as j,f as y,Q as L,z as R}from"./index-ce1b0261.js";const q=()=>{const[o,d]=l.useState(null),[S,f]=l.useState(!0),[g,c]=l.useState(null);l.useEffect(()=>{async function t(){try{const r=h(x,"listings"),n=m(r,p("offer","==",!0),b("timestamp","desc"),j(8)),i=await y(n),a=i.docs[i.docs.length-1];c(a);const e=[];i.forEach(u=>e.push({id:u.id,data:u.data()})),d(e),f(!1)}catch{L.error("Could not fetch listing")}}t()},[]);async function E(){try{const t=h(x,"listings"),r=m(t,p("offer","==",!0),b("timestamp","desc"),R(g),j(4)),n=await y(r),i=n.docs[n.docs.length-1];c(i);const a=[];n.forEach(e=>a.push({id:e.id,data:e.data()})),d(e=>[...e,...a]),n.docs.length<4&&c(null)}catch{L.error("Could not fetch listing")}finally{f(!1)}}return s.jsxs("div",{className:"max-w-6xl mx-auto px-3",children:[s.jsx("h1",{className:"mt-6 mb-6 text-3xl text-center font-bold",children:"Offers"}),S?s.jsx(F,{}):o&&o.length>0?s.jsxs(s.Fragment,{children:[s.jsx("main",{children:s.jsx("ul",{className:"sm:grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:o.map(t=>s.jsx(N,{id:t.id,listing:t.data},t.id))})}),g&&s.jsx("div",{className:"flex justify-center items-center ",children:s.jsx("button",{onClick:E,className:"bg-pink-50 px-3 py-1.5 text-gray-700 border border-gray-300 mb-6 mt-6 hover:border-slate-600 hover:bg-blue-50 rounded transition duration-200 ease-in-out",children:"Load more"})})]}):s.jsx("p",{children:"There are no current offers"})]})};export{q as default};
